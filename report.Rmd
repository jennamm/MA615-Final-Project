---
title: "Noise Lab Sources Report"
author: "Jenna Moscaritolo"
date: "12/10/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyr)
library(dplyr)
library(sf)
library(tmap)
```




POSSIBLE CHANGE TO MAIN QUESTION: being able to produce different maps for each source



The next step is separating 

```{r, warning = FALSE}
boston_data <- st_read("c7230a7a-4081-4743-b911-e18f66e1beca2020330-1-17gw6be.a4ds.shp")
measurements <- read.csv("Measurements_date.csv")
data <- read.csv("data.csv")

# Turn the data frame into sf data
epsg_wgs84 <- 4326
measurements %<>% st_as_sf(coords = c("Longitude", "Latitude")) %>% st_set_crs(epsg_wgs84)


# Make sure that measurements data has the same crs with boston_data
epsg_wgs84 <- 3857
measurements %<>% st_as_sf(coords = c("Longitude", "Latitude")) %>% st_transform(epsg_wgs84)

# Find the points of noise measurements that are in the Boston area
measurements$join <- lengths(st_intersects(measurements, boston_data))
measurements <- subset(measurements, measurements$join == 1)
joindata <- boston_data %>% st_join(measurements)


# Separating the first word in the "Genre" column - we will only use the first word
df_first_word <- separate(measurements, c("Sources"), "Sources")


df <- df_first_word[!df_first_word$Sources == "other", ]


y <- unique(df$Sources)
```

```{r}
# Initial Boston mapped data
tmap_mode('view')
tm_shape(boston_data) +
  tm_polygons('MedIllnes', palette = "YlGn", title = "Medical Illness") +
  tm_shape(df) +
  tm_dots(col = 'Avg', size = 0.02, alpha = 0.5, palette = "Accent", title = 'Average Noise Score') +
  tm_layout(main.title = 'Boston Vulnerability (Medical Illness) and Average Noise Score')
```


Trying to assign things to 

```{r}

```





Research


Noise levels are measured in decibels. At first, people think that noise is measured by distance but it is, in fact, measured on a logarithmic scale to be able to correspond to the way our ears interpret sound pressures.





Options on app:

airplane - 90
car music
delivery
fireworks
horn
leaf blower
neighbor - 70
pickup
restaurant - 60
trains
voices - 70
alarm - 
construction
dog
footsteps - 
hvac - 60
music - 70
party - 120
quiet - 30
traffic - 60
trash - 80
other - NA










```{r}
#### Random code from online source
# For shapes that have a border (like 21), you can colour the inside and outside separately. Use the stroke aesthetic to modify the width of the border
ggplot(mtcars, aes(wt, mpg)) +
  geom_point(shape = 21, colour = "black", fill = "white", size = 5, stroke = 5)



# You can create interesting shapes by layering multiple points of
# different sizes
p <- ggplot(mtcars, aes(mpg, wt, shape = factor(cyl)))
p + geom_point(aes(colour = factor(cyl)), size = 4) +
  geom_point(colour = "grey90", size = 1.5)
```








# Bibliography

https://www.faa.gov/regulations_policies/policy_guidance/noise/basics/

https://www.chem.purdue.edu/chemsafety/Training/PPETrain/dblevels.htm





